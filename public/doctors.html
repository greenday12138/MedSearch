<html>

<head>
    <title>医生详情</title>
    <link rel="stylesheet" href="./lib/bootstrap.css">
    <link rel="stylesheet" href="lib/fonts/iconfont.css">
    <link rel="stylesheet" href="./src/style.css">
    <script src="lib/axios.js"></script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top ">
        <a class="navbar-brand" href="./index.html"> <span class="glyphicon glyphicon-plus"
                aria-hidden="true"></span>医生详情</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">


        </div>
    </nav>

    <div class="col-12" style="height: 3rem;"></div>

    <main class="row" style="width: 80%;margin: auto;">
        <div class="col-12" style="height: 1rem;"></div>
        <div class="card col-12">
            <div class="card-header">
                医生档案
            </div>
            <div class="card-body">
                <img src="src/img/avatar.jpg">
                <h4 id="name" style="display: inline-block; width: 30%;" class="card-title">八意永琳</h4>
                <h5 id="name2" style="display: inline-block; width: 30%;">xxxxxxxxxxxxxxx</h5>
                <p id="exper" class="card-text">主攻方向</p>
                <p id="factory" class="card-text">科室</p>
                <p id="priority" class="card-text">职称</p>
                <p id="description" class="card-text">详细介绍</p>
                <p class="card-text">论文列表</p>
                <ul id="articles" class="list-group">
                    <li>111111111111111111111111</li>
                    <li>222222222222222222222222222</li>
                    <li>33333333333333333333333333</li>
                    <li>333333333333333333333333333</li>
                    <li>4444444444444444444444444444</li>
                </ul>
                <a href="#" class="btn btn-primary">在线求助</a>
            </div>
        </div>

    </main>

    <script src="lib/jquery.js"></script>
    <script src="lib/bootstrap.bundle.js"></script>
    <script>
        $(".collapse-open").click(function () {
            $(".collapse").collapse('hide');
            let id = $(this).attr('for');
            $(".collapse[id=\'" + id + "\']").collapse('show');
        });
    </script>
    <script>
        function SetInfo(data) {
            $("#name")[0].innerText=data.name_ch;
            $("#exper")[0].innerText=data.doctor_expertise;
            $("#factory")[0].innerText=data.doctor_faculty;
            $("#priority")[0].innerText=data.doctor_political;
            $("#description")[0].innerText=data.doctor_description;
            $("#articles")[0].innerHTML="";
            $("#name2")[0].innerText=data.pinying+" "+data.full_surmane+" "+data.abbre_surname+" "+data.full_firstname+" "+data.abbre_firstname;
            let article=data.articles;
            for(let i=0;i<article.length;i++){
                let a=document.createElement('li');
                a.innerText=article[i].department+" "+article[i].author_order+" "+article[i].article_id;
                article.appendChild(a);
            }

        }
        let name = sessionStorage.getItem('docid');
        axios.post('/getdocinfo', {
            name_ch: name
        })
            .then(res => {
                console.log(res);
                SetInfo(res.data);
            })
            .catch(err => {
                alert("不存在这个医生");
                window.location.href="index.html";
                console.error(err);
            })
    </script>

    <script>

    </script>
</body>

</html>